"use strict";(self["webpackChunkmyblog"]=self["webpackChunkmyblog"]||[]).push([[670],{2326:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deleteMsg animate__animated animate__fadeIn"},[a("el-table",{staticClass:"table center",attrs:{data:e.messages,"max-height":"512","highlight-current-row":"",border:"",stripe:""}},[a("template",{slot:"empty"},[a("el-empty",{directives:[{name:"show",rawName:"v-show",value:e.messages.length,expression:"messages.length"}],attrs:{"image-size":250,description:""}})],1),a("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),a("el-table-column",{attrs:{prop:"name",label:"留言人",width:"190"}}),a("el-table-column",{attrs:{prop:"content",label:"留言内容",width:"500"}}),a("el-table-column",{attrs:{prop:"time",label:"留言时间",width:"300"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteMsg(t.row)}}},[e._v(" 删除 ")])]}}])})],2),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.messages.length,expression:"messages.length"}],staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.handleCurrentChange}})],1)},i=[],l=a(2747),n=a.n(l),r={data(){return{messages:[],page:1,total:0,pageSize:8}},methods:{async handleCurrentChange(e){this.page=e;try{let e=await this.$api({url:"/api/getMessagesByPage",method:"get",params:{page:this.page,pageSize:this.pageSize}});this.messages=e.data.results,this.total=e.data.total,this.$nextTick((()=>{this.loading=!1}))}catch(t){console.log(t),this.$msg("不好意思，出错了")}},deleteMsg(e){n().confirm("确定删除该留言?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((()=>{this.confirmDelete(e)})).catch((()=>{}))},async confirmDelete(e){try{await this.$api({url:"/api/deleteMsg",method:"get",params:{id:e.id}});this.$msg({message:"删除成功",type:"success"}),this.handleCurrentChange(this.page)}catch(t){console.log(t)}}},async created(){try{let e=await this.$api({url:"/api/getMessagesByPage",method:"get",params:{page:this.page,pageSize:this.pageSize}});this.messages=e.data.results,this.total=e.data.total,this.$nextTick((()=>{this.loading=!1}))}catch(e){console.log(e),this.$msg("不好意思，出错了")}}},g=r,o=a(1001),h=(0,o.Z)(g,s,i,!1,null,"235431b6",null),c=h.exports}}]);